!function(a){"use strict";var b=function(a,b){this.element=a,this.type=b};b.prototype={add:function(a){this.callback=a,this.element.addEventListener(this.type,this.callback,!1)},remove:function(){this.element.removeEventListener(this.type,this.callback,!1)}};var c=function(a){this.element=a,this.transitionEnd=this.whichTransitionEnd(),this.event=new b(this.element,this.transitionEnd)};c.prototype={whichTransitionEnd:function(){var a={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var b in a)if(void 0!==this.element.style[b])return a[b]},bind:function(a){this.event.add(a)},unbind:function(){this.event.remove()}};var d={list:[],getPosition:function(a){if(Array.prototype.indexOf)return this.list.indexOf(a);for(var b=0,c=this.list.length;c>b;b++)if(this.list[b]===a)return b;return-1},insert:function(a){var b=this.getPosition(a),d=-1!==b;return d||(this.list.push(a),this.list.push(new c(a)),b=this.getPosition(a)),this.list[b+1]}};a.transitionEnd=function(a){if(!a)throw"You need to pass an element as parameter!";var b=a[0]||a,c=d.insert(b);return c}}(window),function(a){function b(a,b){c(a).css({WebkitTransition:b,MozTransition:b,MsTransition:b,OTransition:b,transition:b})}var c=a,d=function(a,b,d){this.target=a,this.options=c.extend({direction:"left",transitionDuration:"0.3s"},d),this.menu=c('<div class="sliding-menu">'),this.menu.css({position:"fixed",top:0,height:"100%",overflow:"auto"}),this.menu.css(this.options.direction,0),this.menu.append(c(b).clone()),this.overlay=c('<div class="sliding-menu-overlay">'),this.overlay.css({position:"fixed",top:0,width:"100%",height:"100%"}),this.overlay.css(this.options.direction,0),this.target.on("click",c.proxy(this.open,this)),this.overlay.on("click",c.proxy(this.close,this)),c(window).on("resize",c.proxy(this.close,this))};d.prototype.wrapWithTransitions=function(a){var d=this,e="all "+d.options.transitionDuration+" ease-in-out";c("body").delay(0).queue(function(){b(c("body"),e),b(d.menu,e),b(d.overlay,e),c(this).dequeue()}).delay(50).queue(function(){a(),transitionEnd(c("body")).bind(c.proxy(function(){transitionEnd(c("body")).unbind(),b(c("body"),""),b(d.menu,""),b(d.overlay,""),c(this).dequeue()},this))})},d.prototype.open=function(){this.state="open";var a=this;c("body").clearQueue().queue(function(){c("body").append(a.overlay,a.menu),a.menu.css(a.options.direction,-a.menu.width()+"px"),a.overlay.css("opacity",0),c("body").css({position:"relative",overflow:"hidden"}),c("body").css(a.options.direction,"0px"),c(this).dequeue()}),this.wrapWithTransitions(function(){c("body").css(a.options.direction,a.menu.width()+"px"),a.menu.css(a.options.direction,"0px"),a.overlay.css("opacity",1)})},d.prototype.close=function(){if("open"==this.state){this.state="close";var a=this;this.wrapWithTransitions(function(){a.overlay.css("opacity",0),c("body").css(a.options.direction,"0px"),a.menu.css(a.options.direction,-a.menu.width()+"px")}),c("body").queue(function(){a.menu.detach(),a.overlay.detach(),c("body").css({position:"",overflow:""}),c("body").css(a.options.direction,""),a.menu.css(a.options.direction,""),a.overlay.css("opacity","")})}},a.fn.slidingMenu=function(a,b){typeof b!=typeof{}&&(option={}),c(this).each(function(){new d(c(this),a,b)})}}(jQuery);