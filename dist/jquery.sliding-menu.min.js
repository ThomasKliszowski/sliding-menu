!function(a){"use strict";var b=function(a,b){this.element=a,this.type=b};b.prototype={add:function(a){this.callback=a,this.element.addEventListener(this.type,this.callback,!1)},remove:function(){this.element.removeEventListener(this.type,this.callback,!1)}};var c=function(a){this.element=a,this.transitionEnd=this.whichTransitionEnd(),this.event=new b(this.element,this.transitionEnd)};c.prototype={whichTransitionEnd:function(){var a={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var b in a)if(void 0!==this.element.style[b])return a[b]},bind:function(a){this.event.add(a)},unbind:function(){this.event.remove()}};var d={list:[],getPosition:function(a){if(Array.prototype.indexOf)return this.list.indexOf(a);for(var b=0,c=this.list.length;c>b;b++)if(this.list[b]===a)return b;return-1},insert:function(a){var b=this.getPosition(a),d=-1!==b;return d||(this.list.push(a),this.list.push(new c(a)),b=this.getPosition(a)),this.list[b+1]}};a.transitionEnd=function(a){if(!a)throw"You need to pass an element as parameter!";var b=a[0]||a,c=d.insert(b);return c}}(window),function(a){function b(a,b){$(a).css({WebkitTransition:b,MozTransition:b,MsTransition:b,OTransition:b,transition:b})}var c=function(a,b,c){this.target=a,this.options=$.extend({direction:"left",transitionDuration:"0.3s"},c),this.menu=$('<div class="sliding-menu">'),this.menu.css({position:"fixed",top:0,height:"100%",overflow:"auto"}),this.menu.css(this.options.direction,0),this.menu.append($(b).clone()),this.overlay=$('<div class="sliding-menu-overlay">'),this.overlay.css({position:"fixed",top:0,width:"100%",height:"100%"}),this.overlay.css(this.options.direction,0),this.target.on("click",$.proxy(this.open,this)),this.overlay.on("click",$.proxy(this.close,this)),$(window).on("resize",$.proxy(this.close,this))};c.prototype.wrapWithTransitions=function(a){var c=this,d="all "+c.options.transitionDuration+" ease-in-out";$("body").delay(0).queue(function(){b($("body"),d),b(c.menu,d),b(c.overlay,d),$(this).dequeue()}).delay(50).queue(function(){a(),transitionEnd($("body")).bind($.proxy(function(){transitionEnd($("body")).unbind(),b($("body"),""),b(c.menu,""),b(c.overlay,""),$(this).dequeue()},this))})},c.prototype.open=function(){this.state="open";var a=this;$("body").clearQueue().queue(function(){$("body").append(a.overlay,a.menu),a.menu.css(a.options.direction,-a.menu.width()+"px"),a.overlay.css("opacity",0),$("body").css({position:"relative",overflow:"hidden"}),$("body").css(a.options.direction,"0px"),$(this).dequeue()}),this.wrapWithTransitions(function(){$("body").css(a.options.direction,a.menu.width()+"px"),a.menu.css(a.options.direction,"0px"),a.overlay.css("opacity",1)})},c.prototype.close=function(){if("open"==this.state){this.state="close";var a=this;this.wrapWithTransitions(function(){a.overlay.css("opacity",0),$("body").css(a.options.direction,"0px"),a.menu.css(a.options.direction,-a.menu.width()+"px")}),$("body").queue(function(){a.menu.detach(),a.overlay.detach(),$("body").css({position:"",overflow:""}),$("body").css(a.options.direction,""),a.menu.css(a.options.direction,""),a.overlay.css("opacity","")})}},a.fn.slidingMenu=function(a,b){typeof b!=typeof{}&&(option={}),$(this).each(function(){new c($(this),a,b)})}}(jQuery);